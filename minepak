#!/opt/homebrew/bin/php
<?php declare(strict_types=1);

if(php_sapi_name() !== 'cli') {
    exit;
}

const el = PHP_EOL;

require_once __DIR__ . '/commands/register.php';

if($argc == 1) {
    echo 'Available Commands'.el;
    foreach($cmds as $cmd) {
        echo $cmd->name . "\t\t" . $cmd->desc . el;
    }
}

if($argc > 1) {
    $command = $argv[1];

    switch($command) {
        case 'install':
        case '-i':
            ($install->exec)(@$argv[2]);
            break;
        case 'search':
        case '-s':
            ($search->exec)(@$argv[2]);
            break;
        case 'version':
        case '-v':
            ($version->exec)();
            break;
        default:
            echo 'Unknown command: ' . $command.el;
    }
}